window.__require=function t(e,s,a){function o(i,r){if(!s[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var _=s[i]={exports:{}};e[i][0].call(_.exports,function(t){return o(e[i][1][t]||t)},_,_.exports,t,e,s,a)}return s[i].exports}for(var n="function"==typeof __require&&__require,i=0;i<a.length;i++)o(a[i]);return o}({BuildConfig:[function(t,e,s){"use strict";var a,o,n,i;cc._RF.push(e,"9ace4rbQzBGA6IvUKU9cbUm","BuildConfig"),Object.defineProperty(s,"__esModule",{value:!0}),s.GAME_JUMP_TO_URL=s.ENV_URL=s.PROJECT_VER=s.E_ENV_CONFIG=s.PROJECT_ENV=void 0,s.PROJECT_ENV="DEV",function(t){t.DEV="DEV",t.TEST="TEST",t.PROD="PROD"}(i=s.E_ENV_CONFIG||(s.E_ENV_CONFIG={})),s.PROJECT_VER=((a={})[i.DEV]="1.0.2",a[i.TEST]="1.1.1",a[i.PROD]="1.0.0",a);var r=((o={})[i.DEV]="http://192.168.1.180:8001",o[i.TEST]="http://192.168.1.180:8001",o[i.PROD]="http://192.168.1.180:8001",o),c=((n={})[i.DEV]="https://192.168.1.180:8001/",n[i.TEST]="https://192.168.1.180:8001/",n[i.PROD]="https://192.168.1.180:8001/",n);s.ENV_URL=r.DEV,s.GAME_JUMP_TO_URL=c.DEV,cc._RF.pop()},{}],HotUpdateUrl:[function(t,e){"use strict";cc._RF.push(e,"765f7/GVMNAQqX7zySu9ZcY","HotUpdateUrl"),e.exports="8081",cc._RF.pop()},{}],HotUpdate:[function(t,e,s){"use strict";cc._RF.push(e,"4b77aGD9OJFsaZL+oCKweM6","HotUpdate");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,e)},function(t,e){function s(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),n=this&&this.__decorate||function(t,e,s,a){var o,n=arguments.length,i=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,s,a);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(i=(n<3?o(i):n>3?o(e,s,i):o(e,s))||i);return n>3&&i&&Object.defineProperty(e,s,i),i};Object.defineProperty(s,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,l=i.executeInEditMode,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.manifestUrl=null,e.versionCompareHandle=null,e._am=null,e._updating=!1,e._canRetry=!1,e._updateListener=null,e}return o(e,t),e.prototype.onLoad=function(){cc.sys.isNative&&(this.customManifestStr=this.manifestUrl._nativeAsset,this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"blackjack-remote-asset",this.versionCompareHandle=function(t,e){cc.log("\u81ea\u5b9a\u4e49\u6bd4\u8f83\u7248\u672c: version A is "+t+", version B is "+e);for(var s=t.split("."),a=e.split("."),o=0;o<s.length;++o){var n=parseInt(s[o]),i=parseInt(a[o]||0);if(n!==i)return n-i}return a.length>s.length?-1:0},this._am=new jsb.AssetsManager("",this._storagePath,this.versionCompareHandle),this._am.setVerifyCallback(function(t,e){return e.compressed,e.md5,e.path,e.size,!0}),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2),this.entrance())},e.prototype.onDestroy=function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)},e.prototype.entrance=function(){this.checkUpdate()},e.prototype.loadCustomManifest=function(){if(this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=new jsb.Manifest(this.customManifestStr,this._storagePath);this._am.loadLocalManifest(t,this._storagePath),console.log("Using custom manifest")}},e.prototype.checkCb=function(t){var e=this;switch(console.log("Code: "+t.getEventCode()),t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("\u672a\u627e\u5230\u672c\u5730\u6e05\u5355\u6587\u4ef6\uff0c\u5df2\u8df3\u8fc7\u70ed\u66f4\u65b0\u3002");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("\u65e0\u6cd5\u4e0b\u8f7d\u6e05\u5355\u6587\u4ef6\uff0c\u5df2\u8df3\u8fc7\u70ed\u66f4\u65b0\u3002");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("\u5df2\u7ecf\u662f\u6700\u65b0\u7684\u8fdc\u7a0b\u7248\u672c\u3002");break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:console.log("\u65b0\u7248\u672c!!, please try to update. ("+this._am.getTotalBytes()+")"),setTimeout(function(){e.hotUpdate()},100);break;default:return}this._am.setEventCallback(null),this._updating=!1},e.prototype.checkUpdate=function(){if(this._updating)console.log("\u68c0\u67e5\u66f4\u65b0\u4e2d ...");else{if(this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.manifestUrl.nativeUrl;console.log("\u65b0\u5305\u7684 manifestUrl-uuid :",t),this._am.loadLocalManifest(t)}console.log(this._am.getLocalManifest(),this._am.getLocalManifest().isLoaded()),this._am.getLocalManifest()&&this._am.getLocalManifest().isLoaded()?(this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate(),this._updating=!0):console.log("\u672a\u80fd\u52a0\u8f7d\u672c\u5730\u6e05\u5355...")}},e.prototype.updateCb=function(t){var e=!1,s=!1;switch(t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("\u672a\u627e\u5230\u672c\u5730\u6e05\u5355\u6587\u4ef6\uff0c\u5df2\u8df3\u8fc7\u70ed\u66f4\u65b0\u3002"),s=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:console.log("\u66f4\u65b0. \u5b57\u8282\u8fdb\u5ea6",t.getDownloadedBytes()+" / "+t.getTotalBytes(),NaN,t.getDownloadedFiles()+" / "+t.getTotalFiles());var a=t.getMessage();a&&console.log("Updated file: "+a);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("\u65e0\u6cd5\u4e0b\u8f7d\u6e05\u5355\u6587\u4ef6\uff0c\u5df2\u8df3\u8fc7\u70ed\u66f4\u65b0\u3002"),s=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("\u5df2\u7ecf\u662f\u6700\u65b0\u7684\u8fdc\u7a0b\u7248\u672c\u3002"),s=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:console.log("\u66f4\u65b0\u5b8c\u6210\u3002 "+t.getMessage()),e=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:console.log("\u66f4\u65b0\u5931\u8d25\u3002 "+t.getMessage()),this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:console.log("\u8d44\u4ea7\u66f4\u65b0\u9519\u8bef\uff1a "+t.getAssetId()+", "+t.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:console.log("\u9519\u8bef\u89e3\u538b\u7f29"),console.log(t.getMessage())}if(s&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),e){console.log("\u6210\u529f\u70ed\u66f4\u65b0"),this._am.setEventCallback(null),this._updateListener=null;var o=jsb.fileUtils.getSearchPaths(),n=this._am.getLocalManifest().getSearchPaths();Array.prototype.unshift.apply(o,n),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(o)),jsb.fileUtils.setSearchPaths(o),cc.audioEngine.stopAll(),cc.game.restart()}},e.prototype.hotUpdate=function(){if(this._am&&!this._updating){if(this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===jsb.AssetsManager.State.UNINITED){var t=this.manifestUrl.nativeUrl;console.log("hotUpdate loadLocalManifest:",t),this._am.loadLocalManifest(t)}this._am.update(),this._updating=!0,console.log("execute hotUpdate")}},e.prototype.retry=function(){!this._updating&&this._canRetry&&(this._canRetry=!1,console.log("Retry failed Assets..."),this._am.downloadFailedAssets())},n([c(cc.Asset)],e.prototype,"manifestUrl",void 0),n([r,l],e)}(cc.Component);s.default=_,cc._RF.pop()},{}]},{},["BuildConfig","HotUpdate","HotUpdateUrl"]);